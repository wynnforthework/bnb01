# 现货和合约页面分离使用指南

## 🎯 功能概述

系统现已完全分离现货和合约交易功能，提供独立的页面、数据和交易状态管理。用户可以同时或分别使用现货和合约交易功能。

## 🚀 快速开始

### 1. 启动系统

```bash
# 启动Web服务器
python app.py
```

### 2. 访问页面

- **现货交易页面**: `http://localhost:5000/`
- **合约交易页面**: `http://localhost:5000/futures`

## 📊 页面功能对比

### 现货交易页面 (蓝色主题)

| 功能 | 描述 |
|------|------|
| 🏠 **页面地址** | `http://localhost:5000/` |
| 🎨 **主题色彩** | 蓝色主题 (现货专用) |
| 💰 **账户信息** | 现货账户余额和资产 |
| 📈 **持仓管理** | 现货持仓 (无杠杆) |
| 🔄 **交易历史** | 现货交易记录 |
| ⚙️ **交易控制** | 现货交易启动/停止 |
| 📊 **策略管理** | 现货交易策略 |

### 合约交易页面 (黄色主题)

| 功能 | 描述 |
|------|------|
| 🏠 **页面地址** | `http://localhost:5000/futures` |
| 🎨 **主题色彩** | 黄色主题 (合约专用) |
| 💰 **账户信息** | 合约账户余额和保证金 |
| 📈 **持仓管理** | 合约持仓 (支持杠杆) |
| 🔄 **交易历史** | 合约交易记录 |
| ⚙️ **交易控制** | 合约交易启动/停止 |
| 📊 **策略管理** | 合约交易策略 |
| 🪙 **币种选择** | 手动选择交易币种 |
| ⚡ **杠杆设置** | 5x-100x杠杆配置 |

## 🪙 合约币种选择功能

### 支持的币种

合约页面支持以下币种的手动选择：

- **BTC/USDT** - 比特币
- **ETH/USDT** - 以太坊
- **BNB/USDT** - 币安币
- **ADA/USDT** - 艾达币
- **DOGE/USDT** - 狗狗币
- **SOL/USDT** - Solana
- **DOT/USDT** - Polkadot
- **AVAX/USDT** - Avalanche
- **LINK/USDT** - Chainlink
- **LTC/USDT** - 莱特币

### 币种选择方法

1. **进入合约页面**
2. **找到"交易币种"选择框**
3. **按住Ctrl键选择多个币种**
4. **点击"更新配置"按钮**
5. **系统会为选中的币种创建策略**

## ⚡ 杠杆设置

### 支持的杠杆倍数

- **5x** - 保守杠杆
- **10x** - 中等杠杆 (默认)
- **20x** - 积极杠杆
- **50x** - 高风险杠杆
- **100x** - 极高风险杠杆

### 杠杆设置方法

1. **在合约页面选择杠杆倍数**
2. **点击"更新配置"按钮**
3. **系统会为所有选中币种设置杠杆**
4. **杠杆设置立即生效**

## 🔧 独立交易状态

### 现货交易控制

```javascript
// 现货交易状态独立管理
- 启动现货交易: 只影响现货策略
- 停止现货交易: 不影响合约交易
- 现货策略数量: 独立计算
- 现货持仓: 独立显示
```

### 合约交易控制

```javascript
// 合约交易状态独立管理
- 启动合约交易: 只影响合约策略
- 停止合约交易: 不影响现货交易
- 合约策略数量: 独立计算
- 合约持仓: 独立显示
```

## 📡 API端点分离

### 现货API端点

| 端点 | 功能 |
|------|------|
| `GET /api/account` | 现货账户信息 |
| `GET /api/portfolio` | 现货投资组合 |
| `GET /api/trades` | 现货交易历史 |
| `POST /api/trading/start` | 启动现货交易 |
| `POST /api/trading/stop` | 停止现货交易 |
| `GET /api/trading/status` | 现货交易状态 |

### 合约API端点

| 端点 | 功能 |
|------|------|
| `GET /api/futures/account` | 合约账户信息 |
| `GET /api/futures/positions` | 合约持仓 |
| `GET /api/futures/trades` | 合约交易历史 |
| `POST /api/futures/trading/start` | 启动合约交易 |
| `POST /api/futures/trading/stop` | 停止合约交易 |
| `GET /api/futures/trading/status` | 合约交易状态 |
| `GET /api/futures/market/{symbol}` | 合约市场数据 |
| `POST /api/futures/order/place` | 合约手动下单 |
| `POST /api/futures/position/close` | 合约平仓 |
| `POST /api/futures/leverage/set` | 设置杠杆 |

## 🎮 使用流程

### 现货交易流程

1. **访问现货页面**: `http://localhost:5000/`
2. **查看现货账户**: 检查USDT余额和现货持仓
3. **启动现货交易**: 点击"启动现货交易"按钮
4. **监控交易**: 观察现货策略执行情况
5. **手动下单**: 使用现货手动下单功能
6. **停止交易**: 需要时点击"停止现货交易"

### 合约交易流程

1. **访问合约页面**: `http://localhost:5000/futures`
2. **选择交易币种**: 在币种列表中选择要交易的币种
3. **设置杠杆倍数**: 选择合适的杠杆倍数
4. **更新配置**: 点击"更新配置"按钮
5. **查看合约账户**: 检查保证金余额
6. **启动合约交易**: 点击"启动合约交易"按钮
7. **监控持仓**: 观察合约持仓和盈亏情况
8. **手动操作**: 使用手动下单或平仓功能
9. **停止交易**: 需要时点击"停止合约交易"

## 📊 数据实时更新

### WebSocket数据流

系统使用独立的WebSocket数据流：

```javascript
// 现货数据更新
socket.on('portfolio_update', function(data) {
    // 更新现货投资组合
});

socket.on('trades_update', function(data) {
    // 更新现货交易历史
});

// 合约数据更新
socket.on('futures_portfolio_update', function(data) {
    // 更新合约投资组合
});

socket.on('futures_trades_update', function(data) {
    // 更新合约交易历史
});
```

## ⚠️ 注意事项

### 风险提示

1. **现货交易**:
   - 无杠杆风险
   - 资金安全性较高
   - 适合长期投资

2. **合约交易**:
   - 高杠杆高风险
   - 可能快速亏损
   - 需要密切监控

### 使用建议

1. **新手用户**:
   - 先熟悉现货交易
   - 合约交易使用低杠杆
   - 小额资金测试

2. **资金管理**:
   - 现货和合约分别管理
   - 不要使用全部资金
   - 设置合理的止损

3. **策略配置**:
   - 根据市场选择币种
   - 调整杠杆倍数
   - 监控策略表现

## 🔍 故障排除

### 常见问题

1. **页面无法访问**:
   - 确认Web服务器已启动
   - 检查端口5000是否被占用

2. **数据不更新**:
   - 刷新页面重新加载
   - 检查WebSocket连接状态

3. **合约功能异常**:
   - 确认API权限已开启
   - 检查合约账户状态

4. **币种选择无效**:
   - 确认已点击"更新配置"
   - 检查选中的币种是否有效

## 🎉 总结

现货和合约页面分离功能提供了：

✅ **完全独立的页面和数据**
✅ **灵活的币种选择机制**
✅ **独立的交易状态管理**
✅ **专业的合约交易功能**
✅ **直观的用户界面**

现在你可以根据需要选择使用现货交易、合约交易，或者同时使用两种模式！